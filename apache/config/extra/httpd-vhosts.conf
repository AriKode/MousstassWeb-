<VirtualHost *:80>
    ServerName localhost
    ServerAlias www.localhost
    DocumentRoot "/usr/local/apache2/htdocs"
    
    # Redirection vers HTTPS
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
    ServerName localhost
    ServerAlias www.localhost
    DocumentRoot "/usr/local/apache2/htdocs"
    
    SSLEngine on
    SSLCertificateFile "/usr/local/apache2/ssl/localhost.crt"
    SSLCertificateKeyFile "/usr/local/apache2/ssl/localhost.key"
    
    ErrorLog /usr/local/apache2/logs/error_ssl.log
    CustomLog /usr/local/apache2/logs/access_ssl.log combined
    
    <Directory "/usr/local/apache2/htdocs">
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>
</VirtualHost>
